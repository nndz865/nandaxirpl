<!doctype html>
<html lang="id">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Kalkulator Harga</title>
  <script src="/_sdk/element_sdk.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
      height: 100%;
    }
    html {
      height: 100%;
    }
    .gradient-bg {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    }
    .card {
      backdrop-filter: blur(10px);
      background: rgba(255, 255, 255, 0.95);
    }
    .range-input::-webkit-slider-thumb {
      appearance: none;
      width: 20px;
      height: 20px;
      border-radius: 50%;
      cursor: pointer;
    }
    .range-input::-moz-range-thumb {
      width: 20px;
      height: 20px;
      border-radius: 50%;
      cursor: pointer;
      border: none;
    }
  </style>
  <style>@view-transition { navigation: auto; }</style>
  <script src="/_sdk/data_sdk.js" type="text/javascript"></script>
 </head>
 <body class="gradient-bg min-h-full flex items-center justify-center p-4">
  <div class="card rounded-3xl shadow-2xl w-full max-w-2xl p-8">
   <div class="text-center mb-8">
    <h1 id="businessName" class="text-4xl font-bold mb-2">Clarity Studio Photography</h1>
    <p id="tagline" class="text-lg opacity-75">Kalkulator Harga Profesional</p>
   </div>
   <div class="space-y-6"><!-- Sesi Fotografi -->
    <div class="bg-white bg-opacity-50 rounded-2xl p-6">
     <div class="flex justify-between items-center mb-3"><label id="serviceLabel" class="text-lg font-semibold">Sesi Fotografi</label> <span id="sessionValue" class="text-2xl font-bold">2 jam</span>
     </div><input type="range" id="sessionRange" min="1" max="8" value="2" step="0.5" class="range-input w-full h-2 rounded-lg cursor-pointer">
     <div class="flex justify-between text-sm mt-2 opacity-60"><span>1 jam</span> <span>8 jam</span>
     </div>
     <p class="text-right mt-2 font-semibold text-lg" id="sessionPrice">USD 300 - 500</p>
    </div><!-- Editing Foto -->
    <div class="bg-white bg-opacity-50 rounded-2xl p-6">
     <div class="flex justify-between items-center mb-3"><label id="editingLabel" class="text-lg font-semibold">Editing Foto</label> <span id="editingValue" class="text-2xl font-bold">10 foto</span>
     </div><input type="range" id="editingRange" min="0" max="50" value="10" step="5" class="range-input w-full h-2 rounded-lg cursor-pointer">
     <div class="flex justify-between text-sm mt-2 opacity-60"><span>0 foto</span> <span>50 foto</span>
     </div>
     <p class="text-right mt-2 font-semibold text-lg" id="editingPrice">USD 500</p>
    </div><!-- Album Premium -->
    <div class="bg-white bg-opacity-50 rounded-2xl p-6">
     <div class="flex justify-between items-center mb-3"><label id="albumLabel" class="text-lg font-semibold">Album Premium</label> <span id="albumValue" class="text-2xl font-bold">1 album</span>
     </div><input type="range" id="albumRange" min="0" max="3" value="1" step="1" class="range-input w-full h-2 rounded-lg cursor-pointer">
     <div class="flex justify-between text-sm mt-2 opacity-60"><span>0 album</span> <span>3 album</span>
     </div>
     <p class="text-right mt-2 font-semibold text-lg" id="albumPrice">USD 100 - 300</p>
    </div><!-- Total -->
    <div class="rounded-2xl p-6 mt-8">
     <div class="flex justify-between items-center"><span class="text-2xl font-bold">Total Estimasi:</span> <span id="totalPrice" class="text-4xl font-bold">USD 900 - 1,300</span>
     </div>
    </div><!-- Button --> <button id="calculateBtn" class="w-full text-white font-bold py-4 px-6 rounded-2xl text-lg transition-all duration-300 shadow-lg hover:shadow-xl transform hover:scale-105"> Hitung Total </button>
   </div><!-- Info Footer -->
   <div class="mt-8 text-center text-sm opacity-60">
    <p>ðŸ’¡ Geser slider untuk menyesuaikan layanan yang Anda butuhkan</p>
   </div>
  </div>
  <script>
    const defaultConfig = {
      background_color: "#667eea",
      card_color: "#ffffff",
      text_color: "#1f2937",
      button_color: "#8b5cf6",
      accent_color: "#764ba2",
      business_name: "Clarity Studio Photography",
      tagline: "Kalkulator Harga Profesional",
      service_label: "Sesi Fotografi",
      editing_label: "Editing Foto",
      album_label: "Album Premium",
      button_text: "Hitung Total",
      font_family: "system-ui",
      font_size: 16
    };

    let config = { ...defaultConfig };

    const sessionRange = document.getElementById('sessionRange');
    const editingRange = document.getElementById('editingRange');
    const albumRange = document.getElementById('albumRange');
    const calculateBtn = document.getElementById('calculateBtn');

    function updatePrices() {
      const sessionHours = parseFloat(sessionRange.value);
      const editingPhotos = parseInt(editingRange.value);
      const albumCount = parseInt(albumRange.value);

      // Update values display
      document.getElementById('sessionValue').textContent = `${sessionHours} jam`;
      document.getElementById('editingValue').textContent = `${editingPhotos} foto`;
      document.getElementById('albumValue').textContent = `${albumCount} album`;

      // Calculate prices
      const sessionMin = sessionHours * 150;
      const sessionMax = sessionHours * 250;
      const editingTotal = editingPhotos * 50;
      const albumMin = albumCount * 100;
      const albumMax = albumCount * 300;

      // Update individual prices
      document.getElementById('sessionPrice').textContent = `USD ${sessionMin} - ${sessionMax}`;
      document.getElementById('editingPrice').textContent = `USD ${editingTotal}`;
      document.getElementById('albumPrice').textContent = albumCount > 0 ? `USD ${albumMin} - ${albumMax}` : 'USD 0';

      // Calculate total
      const totalMin = sessionMin + editingTotal + albumMin;
      const totalMax = sessionMax + editingTotal + albumMax;
      document.getElementById('totalPrice').textContent = `USD ${totalMin.toLocaleString()} - ${totalMax.toLocaleString()}`;
    }

    sessionRange.addEventListener('input', updatePrices);
    editingRange.addEventListener('input', updatePrices);
    albumRange.addEventListener('input', updatePrices);

    calculateBtn.addEventListener('click', (e) => {
      e.preventDefault();
      const button = e.target;
      button.textContent = 'âœ“ Dihitung!';
      button.style.transform = 'scale(0.95)';
      
      setTimeout(() => {
        button.textContent = config.button_text || defaultConfig.button_text;
        button.style.transform = 'scale(1)';
      }, 1000);
    });

    async function onConfigChange(newConfig) {
      const baseFont = newConfig.font_family || defaultConfig.font_family;
      const baseFontSize = newConfig.font_size || defaultConfig.font_size;
      const fontStack = `${baseFont}, system-ui, -apple-system, sans-serif`;

      // Apply colors
      const bgColor = newConfig.background_color || defaultConfig.background_color;
      const cardColor = newConfig.card_color || defaultConfig.card_color;
      const textColor = newConfig.text_color || defaultConfig.text_color;
      const buttonColor = newConfig.button_color || defaultConfig.button_color;
      const accentColor = newConfig.accent_color || defaultConfig.accent_color;

      document.body.style.background = `linear-gradient(135deg, ${bgColor} 0%, ${accentColor} 100%)`;
      document.querySelector('.card').style.backgroundColor = `rgba(${parseInt(cardColor.slice(1,3), 16)}, ${parseInt(cardColor.slice(3,5), 16)}, ${parseInt(cardColor.slice(5,7), 16)}, 0.95)`;
      document.querySelector('.card').style.color = textColor;
      
      // Apply button color
      calculateBtn.style.backgroundColor = buttonColor;
      
      // Apply range slider colors
      const rangeInputs = document.querySelectorAll('.range-input');
      rangeInputs.forEach(input => {
        input.style.accentColor = buttonColor;
      });

      // Apply fonts
      document.body.style.fontFamily = fontStack;
      document.getElementById('businessName').style.fontSize = `${baseFontSize * 2}px`;
      document.getElementById('tagline').style.fontSize = `${baseFontSize * 1.125}px`;
      
      const labels = document.querySelectorAll('label');
      labels.forEach(label => {
        label.style.fontSize = `${baseFontSize * 1.125}px`;
        label.style.fontFamily = fontStack;
      });

      const values = document.querySelectorAll('[id$="Value"]');
      values.forEach(value => {
        value.style.fontSize = `${baseFontSize * 1.5}px`;
        value.style.fontFamily = fontStack;
      });

      document.getElementById('totalPrice').style.fontSize = `${baseFontSize * 2}px`;
      calculateBtn.style.fontSize = `${baseFontSize * 1.125}px`;

      // Update text content
      document.getElementById('businessName').textContent = newConfig.business_name || defaultConfig.business_name;
      document.getElementById('tagline').textContent = newConfig.tagline || defaultConfig.tagline;
      document.getElementById('serviceLabel').textContent = newConfig.service_label || defaultConfig.service_label;
      document.getElementById('editingLabel').textContent = newConfig.editing_label || defaultConfig.editing_label;
      document.getElementById('albumLabel').textContent = newConfig.album_label || defaultConfig.album_label;
      calculateBtn.textContent = newConfig.button_text || defaultConfig.button_text;
    }

    if (window.elementSdk) {
      window.elementSdk.init({
        defaultConfig,
        onConfigChange,
        mapToCapabilities: (config) => ({
          recolorables: [
            {
              get: () => config.background_color || defaultConfig.background_color,
              set: (value) => {
                config.background_color = value;
                window.elementSdk.setConfig({ background_color: value });
              }
            },
            {
              get: () => config.card_color || defaultConfig.card_color,
              set: (value) => {
                config.card_color = value;
                window.elementSdk.setConfig({ card_color: value });
              }
            },
            {
              get: () => config.text_color || defaultConfig.text_color,
              set: (value) => {
                config.text_color = value;
                window.elementSdk.setConfig({ text_color: value });
              }
            },
            {
              get: () => config.button_color || defaultConfig.button_color,
              set: (value) => {
                config.button_color = value;
                window.elementSdk.setConfig({ button_color: value });
              }
            },
            {
              get: () => config.accent_color || defaultConfig.accent_color,
              set: (value) => {
                config.accent_color = value;
                window.elementSdk.setConfig({ accent_color: value });
              }
            }
          ],
          borderables: [],
          fontEditable: {
            get: () => config.font_family || defaultConfig.font_family,
            set: (value) => {
              config.font_family = value;
              window.elementSdk.setConfig({ font_family: value });
            }
          },
          fontSizeable: {
            get: () => config.font_size || defaultConfig.font_size,
            set: (value) => {
              config.font_size = value;
              window.elementSdk.setConfig({ font_size: value });
            }
          }
        }),
        mapToEditPanelValues: (config) => new Map([
          ["business_name", config.business_name || defaultConfig.business_name],
          ["tagline", config.tagline || defaultConfig.tagline],
          ["service_label", config.service_label || defaultConfig.service_label],
          ["editing_label", config.editing_label || defaultConfig.editing_label],
          ["album_label", config.album_label || defaultConfig.album_label],
          ["button_text", config.button_text || defaultConfig.button_text]
        ])
      });
    }

    // Initialize
    updatePrices();
    onConfigChange(config);
  </script>
 <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'99cac786e60d1be6',t:'MTc2MjgzMjU0NC4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>